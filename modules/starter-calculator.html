<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simple Calculator | Python Starter</title>
    <link rel="icon" type="image/png" href="../sluggy.png">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;600&family=Outfit:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet">
    <link rel="stylesheet" href="../css/styles.css">
    <link rel="stylesheet" href="../css/tutor.css">
    <link rel="stylesheet" href="../css/module.css">
</head>
<body>
    <a href="#main-content" class="skip-link">Skip to main content</a>

    <header class="site-header">
        <div class="header-content">
            <a href="../index.html" class="logo">
                <span class="logo-icon">üêç</span>
                <span class="logo-text">PyLearn</span>
            </a>
            <button class="hamburger" aria-label="Toggle navigation menu" aria-expanded="false">
                <span class="hamburger-line"></span>
                <span class="hamburger-line"></span>
                <span class="hamburger-line"></span>
            </button>
            <nav aria-label="Main navigation">
                <ul class="nav-links">
                    <li><a href="../index.html" class="nav-link">Home</a></li>
                    <li><a href="../python-starter.html" class="nav-link active">Python Starter</a></li>
                    <li><a href="../index.html#modules" class="nav-link">Python Basics</a></li>
                    <li><a href="../cs50-ai.html" class="nav-link">CS50 AI</a></li>
                </ul>
            </nav>
            <div class="header-actions">
                <button id="theme-toggle" class="theme-toggle" aria-label="Toggle dark mode" title="Toggle dark mode (Press 'd')">
                    <span class="theme-icon-light" aria-hidden="true">‚òÄÔ∏è</span>
                    <span class="theme-icon-dark" aria-hidden="true">üåô</span>
                </button>
                <button id="keyboard-help" class="icon-btn" aria-label="Keyboard shortcuts" title="Keyboard shortcuts (Press '?')">
                    <span aria-hidden="true">‚å®Ô∏è</span>
                </button>
            </div>
        </div>
    </header>

    <main id="main-content" class="module-content">
        <nav class="breadcrumb" aria-label="Breadcrumb">
            <a href="../index.html">Home</a>
            <span aria-hidden="true">‚Üí</span>
            <a href="../python-starter.html">Python Starter</a>
            <span aria-hidden="true">‚Üí</span>
            <span aria-current="page">Simple Calculator</span>
        </nav>

        <article class="module-article">
            <header class="module-header">
                <span class="module-badge">Project 4 of 7</span>
                <h1>Simple Calculator</h1>
                <p class="module-meta">
                    <span class="tag">20 min</span>
                    <span class="tag">functions</span>
                    <span class="tag">operators</span>
                </p>
            </header>

            <!-- Intro -->
            <section class="lesson" id="intro">
                <h2>What We're Building</h2>
                <p>A calculator that can add, subtract, multiply, and divide! But more importantly, you'll learn about <strong>functions</strong> - reusable blocks of code.</p>

                <div class="callout callout-tip">
                    <strong>Why functions matter:</strong> Instead of writing the same code over and over, you write it once as a function and call it whenever you need it. It's like creating your own Python commands!
                </div>

                <div class="code-container">
                    <button class="run-btn" onclick="runCode(this)">‚ñ∂ Run</button>
                    <button class="explain-btn" onclick="explainCode(this)">Explain This</button>
                    <pre><code class="language-python"># Sneak peek: A working calculator!
def add(a, b):
    return a + b

def subtract(a, b):
    return a - b

def multiply(a, b):
    return a * b

def divide(a, b):
    if b == 0:
        return "Error: Can't divide by zero!"
    return a / b

# Use the calculator
print(f"10 + 5 = {add(10, 5)}")
print(f"10 - 5 = {subtract(10, 5)}")
print(f"10 * 5 = {multiply(10, 5)}")
print(f"10 / 5 = {divide(10, 5)}")</code></pre>
                    <div class="code-output hidden"></div>
                </div>

                <p>Let's learn how functions work!</p>
            </section>

            <!-- Step 1: What is a function? -->
            <section class="lesson" id="step-1">
                <h2>Step 1: Your First Function</h2>
                <p>A <strong>function</strong> is a named block of code that does something. You <strong>define</strong> it once with <code>def</code>, then <strong>call</strong> it whenever you want.</p>

                <div class="code-container">
                    <button class="run-btn" onclick="runCode(this)">‚ñ∂ Run</button>
                    <button class="explain-btn" onclick="explainCode(this)">Explain This</button>
                    <pre><code class="language-python"># Define a function with 'def'
def say_hello():
    print("Hello!")
    print("Nice to meet you!")

# Call the function by its name + parentheses
say_hello()
say_hello()  # Call it again!</code></pre>
                    <div class="code-output hidden"></div>
                </div>

                <div class="callout callout-tip">
                    <strong>Key parts:</strong>
                    <ul>
                        <li><code>def</code> - "I'm defining a function"</li>
                        <li><code>say_hello</code> - The name you choose</li>
                        <li><code>()</code> - Parentheses (we'll put stuff here soon!)</li>
                        <li><code>:</code> - Don't forget the colon!</li>
                        <li>Indented code - What the function does</li>
                    </ul>
                </div>
            </section>

            <!-- Step 2: Functions with parameters -->
            <section class="lesson" id="step-2">
                <h2>Step 2: Functions with Inputs (Parameters)</h2>
                <p>Functions become powerful when they can accept <strong>inputs</strong>. These are called <strong>parameters</strong>.</p>

                <div class="code-container">
                    <button class="run-btn" onclick="runCode(this)">‚ñ∂ Run</button>
                    <button class="explain-btn" onclick="explainCode(this)">Explain This</button>
                    <pre><code class="language-python"># 'name' is a parameter - a placeholder for input
def greet(name):
    print(f"Hello, {name}!")

# Call with different values (arguments)
greet("Alice")
greet("Bob")
greet("Python")</code></pre>
                    <div class="code-output hidden"></div>
                </div>

                <p><strong>Parameter</strong> = the variable in the definition (<code>name</code>)<br>
                <strong>Argument</strong> = the actual value you pass in (<code>"Alice"</code>)</p>
            </section>

            <!-- Step 3: Multiple parameters -->
            <section class="lesson" id="step-3">
                <h2>Step 3: Multiple Parameters</h2>
                <p>Functions can take multiple inputs, separated by commas.</p>

                <div class="code-container">
                    <button class="run-btn" onclick="runCode(this)">‚ñ∂ Run</button>
                    <button class="explain-btn" onclick="explainCode(this)">Explain This</button>
                    <pre><code class="language-python"># Two parameters: a and b
def add_numbers(a, b):
    result = a + b
    print(f"{a} + {b} = {result}")

# Call with two arguments
add_numbers(5, 3)
add_numbers(100, 200)
add_numbers(7, 7)</code></pre>
                    <div class="code-output hidden"></div>
                </div>
            </section>

            <!-- Step 4: Return values -->
            <section class="lesson" id="step-4">
                <h2>Step 4: Returning Values</h2>
                <p>Instead of just printing, functions can <strong>return</strong> a value back to you. This is super useful!</p>

                <div class="code-container">
                    <button class="run-btn" onclick="runCode(this)">‚ñ∂ Run</button>
                    <button class="explain-btn" onclick="explainCode(this)">Explain This</button>
                    <pre><code class="language-python"># 'return' sends a value back
def add(a, b):
    return a + b

# Now we can USE the result!
result = add(10, 5)
print(f"The sum is: {result}")

# Or use it directly in expressions
total = add(1, 2) + add(3, 4)
print(f"(1+2) + (3+4) = {total}")</code></pre>
                    <div class="code-output hidden"></div>
                </div>

                <div class="callout callout-tip">
                    <strong>print() vs return:</strong>
                    <ul>
                        <li><code>print()</code> - Shows text on screen, that's it</li>
                        <li><code>return</code> - Sends a value back so you can USE it</li>
                    </ul>
                </div>
            </section>

            <!-- Step 5: All four operations -->
            <section class="lesson" id="step-5">
                <h2>Step 5: Building the Calculator</h2>
                <p>Let's create functions for all four basic operations!</p>

                <div class="code-container">
                    <button class="run-btn" onclick="runCode(this)">‚ñ∂ Run</button>
                    <button class="explain-btn" onclick="explainCode(this)">Explain This</button>
                    <pre><code class="language-python">def add(a, b):
    return a + b

def subtract(a, b):
    return a - b

def multiply(a, b):
    return a * b

def divide(a, b):
    return a / b

# Test them all!
x = 20
y = 4

print(f"{x} + {y} = {add(x, y)}")
print(f"{x} - {y} = {subtract(x, y)}")
print(f"{x} * {y} = {multiply(x, y)}")
print(f"{x} / {y} = {divide(x, y)}")</code></pre>
                    <div class="code-output hidden"></div>
                </div>
            </section>

            <!-- Step 6: Error handling -->
            <section class="lesson" id="step-6">
                <h2>Step 6: Handling Errors (Division by Zero)</h2>
                <p>What happens if you divide by zero? Let's handle that gracefully!</p>

                <div class="code-container">
                    <button class="run-btn" onclick="runCode(this)">‚ñ∂ Run</button>
                    <button class="explain-btn" onclick="explainCode(this)">Explain This</button>
                    <pre><code class="language-python">def safe_divide(a, b):
    if b == 0:
        return "Error: Cannot divide by zero!"
    return a / b

# Test normal division
print(safe_divide(10, 2))

# Test division by zero
print(safe_divide(10, 0))

# Works correctly!
print(safe_divide(100, 5))</code></pre>
                    <div class="code-output hidden"></div>
                </div>

                <div class="callout callout-tip">
                    <strong>Good habit:</strong> Always think about what could go wrong and handle it! This is called <strong>defensive programming</strong>.
                </div>
            </section>

            <!-- Step 7: Complete calculator -->
            <section class="lesson" id="step-7">
                <h2>Step 7: The Complete Calculator!</h2>
                <p>Let's put it all together with a nice interface:</p>

                <div class="code-container">
                    <button class="run-btn" onclick="runCode(this)">‚ñ∂ Run</button>
                    <button class="explain-btn" onclick="explainCode(this)">Explain This</button>
                    <pre><code class="language-python"># Calculator Functions
def add(a, b):
    return a + b

def subtract(a, b):
    return a - b

def multiply(a, b):
    return a * b

def divide(a, b):
    if b == 0:
        return "Error!"
    return a / b

def calculate(num1, operator, num2):
    """Main calculator function"""
    if operator == "+":
        return add(num1, num2)
    elif operator == "-":
        return subtract(num1, num2)
    elif operator == "*":
        return multiply(num1, num2)
    elif operator == "/":
        return divide(num1, num2)
    else:
        return "Unknown operator!"

# Run some calculations!
print("=" * 30)
print("PYTHON CALCULATOR")
print("=" * 30)

calculations = [
    (15, "+", 7),
    (20, "-", 8),
    (6, "*", 7),
    (100, "/", 4),
    (10, "/", 0),  # Test error handling
]

for num1, op, num2 in calculations:
    result = calculate(num1, op, num2)
    print(f"{num1} {op} {num2} = {result}")

print("=" * 30)</code></pre>
                    <div class="code-output hidden"></div>
                </div>
            </section>

            <!-- Step 8: Advanced functions -->
            <section class="lesson" id="step-8">
                <h2>Step 8: Bonus - More Math Functions!</h2>
                <p>Let's add some extra operations:</p>

                <div class="code-container">
                    <button class="run-btn" onclick="runCode(this)">‚ñ∂ Run</button>
                    <button class="explain-btn" onclick="explainCode(this)">Explain This</button>
                    <pre><code class="language-python">def power(base, exponent):
    """Raise base to the power of exponent"""
    return base ** exponent

def modulo(a, b):
    """Get the remainder of division"""
    return a % b

def floor_divide(a, b):
    """Divide and round down to whole number"""
    return a // b

def absolute(n):
    """Get the absolute value"""
    if n < 0:
        return -n
    return n

# Test them!
print(f"2 to the power of 10 = {power(2, 10)}")
print(f"17 mod 5 = {modulo(17, 5)}")
print(f"17 // 5 = {floor_divide(17, 5)}")
print(f"absolute of -42 = {absolute(-42)}")</code></pre>
                    <div class="code-output hidden"></div>
                </div>
            </section>

            <!-- Challenge -->
            <section class="lesson" id="challenge">
                <h2>Challenge: Extend Your Calculator!</h2>
                <p>Try adding these features:</p>

                <div class="callout callout-tip">
                    <strong>Ideas:</strong>
                    <ul>
                        <li>Add a <code>square_root</code> function (hint: <code>n ** 0.5</code>)</li>
                        <li>Add a <code>percentage</code> function</li>
                        <li>Create a <code>average</code> function that takes a list of numbers</li>
                        <li>Add memory functions (store/recall a value)</li>
                    </ul>
                </div>

                <div class="code-container">
                    <button class="run-btn" onclick="runCode(this)">‚ñ∂ Run</button>
                    <button class="explain-btn" onclick="explainCode(this)">Explain This</button>
                    <pre><code class="language-python"># Challenge: Extended Calculator!

def square_root(n):
    """Calculate square root"""
    if n < 0:
        return "Error: Can't sqrt negative!"
    return n ** 0.5

def percentage(part, whole):
    """Calculate what percent 'part' is of 'whole'"""
    if whole == 0:
        return "Error: Can't divide by zero!"
    return (part / whole) * 100

def average(numbers):
    """Calculate the average of a list"""
    if len(numbers) == 0:
        return "Error: Empty list!"
    return sum(numbers) / len(numbers)

# Test your functions!
print(f"Square root of 64 = {square_root(64)}")
print(f"Square root of 2 = {square_root(2):.4f}")

print(f"\n15 is what % of 60? {percentage(15, 60)}%")

scores = [85, 90, 78, 92, 88]
print(f"\nAverage of {scores} = {average(scores)}")</code></pre>
                    <div class="code-output hidden"></div>
                </div>
            </section>

            <!-- What You Learned -->
            <section class="lesson" id="recap">
                <h2>What You Just Learned</h2>
                <ul>
                    <li><code>def function_name():</code> - Define a function</li>
                    <li><code>def greet(name):</code> - Parameters are inputs</li>
                    <li><code>return value</code> - Send a value back</li>
                    <li><code>function_name(arg)</code> - Call a function with arguments</li>
                    <li>Functions can call other functions</li>
                    <li>Error handling inside functions</li>
                    <li><code>**</code> for exponents, <code>%</code> for remainder, <code>//</code> for floor division</li>
                </ul>

                <div class="callout callout-tip">
                    <strong>Functions are everywhere!</strong> Every time you use <code>print()</code>, <code>len()</code>, or <code>range()</code>, you're calling functions that someone else wrote. Now you can write your own!
                </div>
            </section>

            <!-- Navigation -->
            <nav class="module-nav">
                <a href="starter-rps.html" class="btn btn-secondary">‚Üê Rock Paper Scissors</a>
                <button id="mark-complete" class="btn btn-primary">Mark as Complete ‚úì</button>
                <a href="starter-password.html" class="btn btn-secondary">Next: Password Generator ‚Üí</a>
            </nav>
        </article>
    </main>

    <!-- Keyboard Shortcuts Modal -->
    <div id="keyboard-modal" class="modal" role="dialog" aria-labelledby="keyboard-modal-title" aria-hidden="true">
        <div class="modal-content">
            <button class="modal-close" aria-label="Close">√ó</button>
            <h2 id="keyboard-modal-title">Keyboard Shortcuts</h2>
            <dl class="shortcuts-list">
                <dt><kbd>d</kbd></dt><dd>Toggle dark/light mode</dd>
                <dt><kbd>t</kbd></dt><dd>Open AI tutor</dd>
                <dt><kbd>?</kbd></dt><dd>Show this help</dd>
                <dt><kbd>Esc</kbd></dt><dd>Close dialogs</dd>
            </dl>
        </div>
    </div>

    <!-- AI Tutor Panel -->
    <div id="tutor-panel" class="tutor-panel" aria-hidden="true">
        <div class="tutor-header">
            <h2>Python Helper</h2>
            <div class="tutor-status" id="tutor-status">
                <span class="status-dot"></span>
                <span class="status-text">Loading...</span>
            </div>
            <button id="close-tutor" class="tutor-close" aria-label="Close tutor">√ó</button>
        </div>
        <div class="tutor-messages" id="tutor-messages" role="log" aria-live="polite">
            <div class="message bot-message">
                <img src="../sluggy.png" alt="Sluggy" class="sluggy-avatar">
                <div class="message-content">
                    <p><strong>Hi! I'm Sluggy.</strong> Functions are one of the most important concepts in programming!</p>
                    <p>Common questions:</p>
                    <ul>
                        <li>"What's the difference between print and return?"</li>
                        <li>"Why do I need to call a function?"</li>
                        <li>"Can a function call itself?"</li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="tutor-input-area">
            <div id="model-loading" class="model-loading">
                <div class="loading-spinner"></div>
                <span id="loading-text">Initializing...</span>
                <div class="loading-progress"><div class="loading-bar" id="loading-bar"></div></div>
            </div>
            <form id="tutor-form" class="tutor-form">
                <label for="tutor-input" class="visually-hidden">Ask a question</label>
                <input type="text" id="tutor-input" placeholder="Ask about functions, return..." autocomplete="off" disabled>
                <button type="submit" id="tutor-submit" disabled>‚Üí</button>
            </form>
        </div>
    </div>

    <button id="tutor-fab" class="tutor-fab" aria-label="Open AI tutor (Press 't')">
        <span class="fab-icon"><img src="../sluggy.png" alt="" class="sluggy-avatar"></span>
        <span class="fab-text">Get Help</span>
    </button>

    <footer class="site-footer">
        <p>Built with the <strong>Producer Mindset</strong></p>
        <p class="footer-note">No data leaves your browser. Everything runs locally.</p>
    </footer>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-python.min.js"></script>
    <script src="https://cdn.jsdelivr.net/pyodide/v0.25.0/full/pyodide.js"></script>
    <script src="../js/app.js"></script>
    <script src="../js/tutor-flow.js"></script>
    <script src="../js/tutor-ui.js"></script>
    <script src="../js/pyodide-runner.js"></script>
    <script>
        // Mark complete button
        document.getElementById('mark-complete')?.addEventListener('click', () => {
            const progress = JSON.parse(localStorage.getItem('pylearn-starter-progress') || '{}');
            progress['starter-4'] = { completed: true, completedAt: new Date().toISOString() };
            localStorage.setItem('pylearn-starter-progress', JSON.stringify(progress));
            alert('Project complete! Ready to generate some passwords?');
        });

        // Explain This button handler
        function explainCode(btn) {
            const codeBlock = btn.closest('.code-container')?.querySelector('pre code');
            if (codeBlock && window.TutorUI) {
                window.TutorUI.askAboutCode(codeBlock.textContent);
            }
        }

        // Run button handler
        async function runCode(btn) {
            const container = btn.closest('.code-container');
            const codeBlock = container?.querySelector('pre code');
            const outputDiv = container?.querySelector('.code-output');

            if (!codeBlock || !outputDiv) return;

            const code = codeBlock.textContent;
            outputDiv.classList.remove('hidden', 'success', 'error');
            outputDiv.classList.add('loading');
            outputDiv.textContent = 'Running...';
            btn.disabled = true;

            try {
                if (window.PythonRunner) {
                    const result = await window.PythonRunner.runCode(code);
                    outputDiv.classList.remove('loading');
                    outputDiv.classList.add(result.success ? 'success' : 'error');
                    outputDiv.textContent = result.output || '(no output)';
                } else {
                    outputDiv.textContent = 'Python environment loading... try again in a moment!';
                    outputDiv.classList.remove('loading');
                }
            } catch (err) {
                outputDiv.classList.remove('loading');
                outputDiv.classList.add('error');
                outputDiv.textContent = 'Error: ' + err.message;
            }

            btn.disabled = false;
        }
    </script>
</body>
</html>
